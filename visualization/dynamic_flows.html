<!DOCTYPE html>
<!-- saved from url=(0097)https://storage.googleapis.com/supplemental_media/udacityu/2730818600/bootstrap-prestructure.html -->
<html>
<head>

    <meta http-equiv="Content-Type" content="text/html; charset=windows-1252">

    <!-- BOOTSTRAP -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">

    <!-- JQUERY SLIDER -->
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/smoothness/jquery-ui.css">
    <script src="//code.jquery.com/jquery-1.12.4.js"></script>
    <script src="//code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

    <!-- MAP -->
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <script type="text/javascript" src="js/draw.js"></script>

    <!-- CUSTOM -->
    <link rel="stylesheet" href="css/style.css">

</head>
  <body>     

    <div>
      <div class="col-md-4" id="sidebar">
        <div class="row">
          <h2 class="text-uppercase text-center">Swiss Flows</h2>
        </div>
        <hr>

        <div class="row">
          <div class="col-md-4">
            <div class="variable-name">Variable 1</div>
          </div>
          <div class="col-md-7">
            <div id="slider_1"></div>
          </div>
          <div class="col-md-1">
          <div id="slider_1_value">0</div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-4">
            <div class="variable-name">Variable 2</div>
          </div>
          <div class="col-md-7">
            <div id="slider_2"></div>
          </div>
          <div class="col-md-1">
          <div id="slider_2_value">0</div>
          </div>
        </div>
        <input type="button" value="Reload" id="reload_button"/>
        <div class="row" id="filling-row">
          
        </div>
        
      </div>

      <div class="col-md-8" id="swiss_flows">
        <script type="text/javascript">
          /*
            Note: JSON files can not be loaded locally in the browser for security reasons.
                  In order to load the JSON file, create a server: python -m http.server [PORT #]
                  in the directory where the html file resides, and then go to localhost:[PORT #].
                  This version will work since the server uses http.
            */

          // Load the map and draw the visualization
          d3.json("world_countries.json", function(json) {
            draw(json, current_filename);
          });
        </script>
      </div>
    
    </div>

    <script>

      var current_filename = "flows_variable1_0_variable2_0.tsv";

      $("#slider_1").slider({
        min: 0,
        max: 1,
        change: function( event, ui ) {
          var value = $("#slider_1").slider( "option", "value" );
          $("#slider_1_value").html(value);
        }
      });
      $("#slider_2").slider({
        min: 0,
        max: 1,
        change: function( event, ui ) {
          var value = $("#slider_2").slider( "option", "value" );
          $("#slider_2_value").html(value);
        }
      });
      $("#reload_button").click(function() {
        
        // create new filename to be loaded using values from sliders
        current_filename = "flows_" + "variable1_" + $("#slider_1").slider( "option", "value" ) + "_variable2_" + $("#slider_2").slider( "option", "value" ) + ".tsv";

        //remove the svg created by the draw function
        $("svg").remove();
        // Load the map and draw the visualization
        d3.json("world_countries.json", function(json) {
          draw(json, current_filename);
        });

        console.log(current_filename);
        
      });
    </script>

  </body>
</html>