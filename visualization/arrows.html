<!DOCTYPE html>
<html>
<head>
    <title>Drawing line with arrow at the end</title>

    <script src="http://d3js.org/d3.v3.min.js"></script>
</head>

<body>
    <script type='text/javascript'>

    function plot_flows(data) {

        var margin = 75,
            w = 1400 - margin,
            h = 600 - margin;

        // Append an SVG element to the body
        var svg =  d3.select("body")
                    .append("svg")
                    .attr("width", w)
                    .attr("height", h);

        // Plot the arrow tip
        svg.append("svg:defs") // defs are used for elements that are meant to be reused
            .append("svg:marker") // markers mark the end of the line. They need to be inside a defs
            .attr("id", "triangle") // id referenced by the line 
            .attr("refX", 6) // places the arrow tip at a certain position compared to the line
            .attr("refY", 6)
            .attr("markerWidth", 30)
            .attr("markerHeight", 30)
            .attr("orient", "auto") // 'auto' indicates that the marker is oriented such that its positive x-axis is pointing in the direction of the path at the point it is placed.
            .append("path")
            .attr("d", "M 0 0 12 6 0 12 3 6") // defines the shape of the arrow tip
            .style("fill", "black");


        svg.append("line")
            .attr("x1",  100)
            .attr("y1", 100)
            .attr("x2", 200)
            .attr("y2", 100)
            .attr("stroke-width", 1)
            .attr("stroke", "black")
            .attr("marker-end", "url(#triangle)");

        svg.append("line")
            .attr("x1",  300)
            .attr("y1", 300)
            .attr("x2", 400)
            .attr("y2", 200)
            .attr("stroke-width", 1)
            .attr("stroke", "black")
            .attr("marker-end", "url(#triangle)");

        svg.append("line")
            .attr("x1",  600)
            .attr("y1", 100)
            .attr("x2", 20)
            .attr("y2", 300)
            .attr("stroke-width", 1)
            .attr("stroke", "black")
            .attr("marker-end", "url(#triangle)");
    }

    // Load the nodes and plot them 
    d3.tsv("dummy_flows.tsv", function(d) {
        return d;
    }, plot_flows);

</script>
</body>
</html>